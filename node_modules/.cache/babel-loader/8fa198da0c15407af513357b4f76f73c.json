{"remainingRequest":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\src\\pages\\admin\\AdminLogin.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\src\\pages\\admin\\AdminLogin.vue","mtime":1720670267982},{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\babel.config.js","mtime":1718259580098},{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\package.json","mtime":1718596960089},{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1720663462322},{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1720663462552},{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1720663462322},{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1720663457915}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IHJlZiB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgeyBhZG1pbkxvZ2luIH0gZnJvbSAnQC9hcGkvYWRtaW4nOwppbXBvcnQgeyB1c2VBZG1pblN0b3JlIH0gZnJvbSAnQC9zdG9yZXMvYWRtaW5TdG9yZS5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQWRtaW5Mb2dpbicsCiAgc2V0dXAoKSB7CiAgICBjb25zdCBhZG1pblN0b3JlID0gdXNlQWRtaW5TdG9yZSgpOwogICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICBjb25zdCBsb2dpbkZvcm0gPSByZWYoewogICAgICBhZG1pbkNvZGU6ICcnLAogICAgICBwYXNzd29yZDogJycKICAgIH0pOwogICAgY29uc3QgZXJyb3JNZXNzYWdlID0gcmVmKCcnKTsKICAgIGNvbnN0IGhhbmRsZUxvZ2luID0gYXN5bmMgKCkgPT4gewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGRhdGEgPSB7CiAgICAgICAgICBhZG1pbkNvZGU6IGxvZ2luRm9ybS52YWx1ZS5hZG1pbkNvZGUsCiAgICAgICAgICBwYXNzd29yZDogbG9naW5Gb3JtLnZhbHVlLnBhc3N3b3JkCiAgICAgICAgfTsKICAgICAgICBjb25zb2xlLmxvZygnRm9ybSBEYXRhOicsIGRhdGEpOwogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYWRtaW5Mb2dpbihkYXRhKTsKICAgICAgICBjb25zb2xlLmxvZygnUmVzcG9uc2U6JywgcmVzcG9uc2UpOwogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdMb2dpbiBzdWNjZXNzZnVsLCByZXNwb25zZSBkYXRhOicsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgLy8g5YGH6K6+55m75b2V5oiQ5Yqf5pe277yM5ZON5bqU5pWw5o2u5YyF5ZCrdG9rZW4KICAgICAgICAgIC8vIOWtmOWCqHRva2Vu77yM5Y+v5Lul5L2/55SoUGluaWHmiJbogIVsb2NhbFN0b3JhZ2UKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIGFkbWluU3RvcmUudG9rZW4pOwogICAgICAgICAgYWRtaW5TdG9yZS5zZXRUb2tlbihyZXNwb25zZS5kYXRhLmRhdGEpOwogICAgICAgICAgY29uc29sZS5sb2coJ1Rva2VuIHN0b3JlZDonLCBhZG1pblN0b3JlLnRva2VuKTsKICAgICAgICAgIHJvdXRlci5wdXNoKCcvYWRtaW4vbWFpbicpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnTG9naW4gZmFpbGVkLCByZXNwb25zZSBkYXRhOicsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgZXJyb3JNZXNzYWdlLnZhbHVlID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkdXJpbmcgbG9naW46JywgZXJyb3IpOwogICAgICAgIGVycm9yTWVzc2FnZS52YWx1ZSA9ICfnmbvlvZXlpLHotKXvvIzor7fmo4Dmn6XmgqjnmoTotKblj7flkozlr4bnoIHjgIInOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgbG9naW5Gb3JtLAogICAgICBoYW5kbGVMb2dpbiwKICAgICAgZXJyb3JNZXNzYWdlCiAgICB9OwogIH0KfTs="},{"version":3,"names":["ref","useRouter","adminLogin","useAdminStore","name","setup","adminStore","router","loginForm","adminCode","password","errorMessage","handleLogin","data","value","console","log","response","code","localStorage","setItem","token","setToken","push","message","error"],"sources":["C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\src\\pages\\admin\\AdminLogin.vue"],"sourcesContent":["<template>\r\n\t<div class=\"login-container\">\r\n\t  <div class=\"left-section\">\r\n\t    <!-- 左边的图片 -->\r\n\t    <img :src=\"require('@/assets/images/SupervisorLogin.jpg')\" alt=\"SupervisorLogin\" class=\"login-image\" />\r\n\t  </div>\r\n\t  <div class=\"right-section\">\r\n\t    <!-- 右边的登录输入栏 -->\r\n\t    <div class=\"register-header\" style=\"text-align:center;\">\r\n\t      <h3>管理员登录</h3>\r\n\t    </div>\r\n\t    <el-form class=\"login-form\" :model=\"loginForm\">\r\n\t      <el-form-item label=\"账号\" prop=\"adminCode\">\r\n\t        <el-input v-model=\"loginForm.adminCode\" placeholder=\"请输入登录编码\"></el-input>\r\n\t      </el-form-item>\r\n\t      <el-form-item label=\"密码\" prop=\"password\">\r\n\t        <el-input type=\"password\" v-model=\"loginForm.password\" placeholder=\"请输入登录密码\"></el-input>\r\n\t      </el-form-item>\r\n\t      <div style=\"display: flex; justify-content: center;\">\r\n\t        <el-form-item>\r\n\t          <el-button type=\"primary\" @click=\"handleLogin\">登录</el-button>\r\n\t        </el-form-item>\r\n\t      </div>\r\n\t\t  <el-form-item v-if=\"errorMessage\">\r\n\t\t  \t<el-alert type=\"error\" :closable=\"false\" :description=\"errorMessage\" />\r\n\t\t  </el-form-item>\r\n\t    </el-form>\r\n\t  </div>\r\n\t</div>\r\n<!-- \t\r\n\t<div class=\"login-container\">\r\n\t\t<el-card class=\"login-card\">\r\n\t\t\t<h2 class=\"login-title\">登录</h2>\r\n\t\t\t<el-form :model=\"loginForm\" label-width=\"100px\">\r\n\t\t\t\t<el-form-item label=\"登录编码\" prop=\"adminCode\">\r\n\t\t\t\t\t<el-input v-model=\"loginForm.adminCode\" placeholder=\"administrator\" />\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"登录密码\" prop=\"password\">\r\n\t\t\t\t\t<el-input type=\"password\" v-model=\"loginForm.password\" show-password />\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"handleLogin\">登录</el-button>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item v-if=\"errorMessage\">\r\n\t\t\t\t\t<el-alert type=\"error\" :closable=\"false\" :description=\"errorMessage\" />\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t</el-card>\r\n\t</div> -->\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tref\r\n\t} from 'vue';\r\n\timport {\r\n\t\tuseRouter\r\n\t} from 'vue-router';\r\n\timport {\r\n\t\tadminLogin\r\n\t} from '@/api/admin';\r\n\timport {\r\n\t\tuseAdminStore\r\n\t} from '@/stores/adminStore.js';\r\n\texport default {\r\n\t\tname: 'AdminLogin',\r\n\t\tsetup() {\r\n\t\t\tconst adminStore = useAdminStore();\r\n\t\t\tconst router = useRouter();\r\n\t\t\tconst loginForm = ref({\r\n\t\t\t\tadminCode: '',\r\n\t\t\t\tpassword: '',\r\n\t\t\t});\r\n\t\t\tconst errorMessage = ref('');\r\n\r\n\t\t\tconst handleLogin = async () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst data = {\r\n\t\t\t\t\t\tadminCode: loginForm.value.adminCode,\r\n\t\t\t\t\t\tpassword: loginForm.value.password,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconsole.log('Form Data:', data);\r\n\r\n\t\t\t\t\tconst response = await adminLogin(data);\r\n\t\t\t\t\tconsole.log('Response:', response);\r\n\r\n\t\t\t\t\tif (response.data.code === 0) {\r\n\t\t\t\t\t\tconsole.log('Login successful, response data:', response.data);\r\n\t\t\t\t\t\t// 假设登录成功时，响应数据包含token\r\n\t\t\t\t\t\t// 存储token，可以使用Pinia或者localStorage\r\n\t\t\t\t\t\tlocalStorage.setItem('token', adminStore.token);\r\n\t\t\t\t\t\tadminStore.setToken(response.data.data);\r\n\t\t\t\t\t\tconsole.log('Token stored:', adminStore.token);\r\n\t\t\t\t\t\trouter.push('/admin/main');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log('Login failed, response data:', response.data);\r\n\t\t\t\t\t\terrorMessage.value = response.data.message;\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('Error during login:', error);\r\n\t\t\t\t\terrorMessage.value = '登录失败，请检查您的账号和密码。';\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\treturn {\r\n\t\t\t\tloginForm,\r\n\t\t\t\thandleLogin,\r\n\t\t\t\terrorMessage,\r\n\t\t\t};\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.login-container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #f0f2f5;\r\n\t}\r\n\r\n\t.login-card {\r\n\t\twidth: 400px;\r\n\t\tpadding: 20px;\r\n\t}\r\n\r\n\t.login-title {\r\n\t\ttext-align: center;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n</style>"],"mappings":";AAoDC,SACCA,GAAE,QACI,KAAK;AACZ,SACCC,SAAQ,QACF,YAAY;AACnB,SACCC,UAAS,QACH,aAAa;AACpB,SACCC,aAAY,QACN,wBAAwB;AAC/B,eAAe;EACdC,IAAI,EAAE,YAAY;EAClBC,KAAKA,CAAA,EAAG;IACP,MAAMC,UAAS,GAAIH,aAAa,CAAC,CAAC;IAClC,MAAMI,MAAK,GAAIN,SAAS,CAAC,CAAC;IAC1B,MAAMO,SAAQ,GAAIR,GAAG,CAAC;MACrBS,SAAS,EAAE,EAAE;MACbC,QAAQ,EAAE;IACX,CAAC,CAAC;IACF,MAAMC,YAAW,GAAIX,GAAG,CAAC,EAAE,CAAC;IAE5B,MAAMY,WAAU,GAAI,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACH,MAAMC,IAAG,GAAI;UACZJ,SAAS,EAAED,SAAS,CAACM,KAAK,CAACL,SAAS;UACpCC,QAAQ,EAAEF,SAAS,CAACM,KAAK,CAACJ;QAC3B,CAAC;QACDK,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEH,IAAI,CAAC;QAE/B,MAAMI,QAAO,GAAI,MAAMf,UAAU,CAACW,IAAI,CAAC;QACvCE,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEC,QAAQ,CAAC;QAElC,IAAIA,QAAQ,CAACJ,IAAI,CAACK,IAAG,KAAM,CAAC,EAAE;UAC7BH,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAEC,QAAQ,CAACJ,IAAI,CAAC;UAC9D;UACA;UACAM,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEd,UAAU,CAACe,KAAK,CAAC;UAC/Cf,UAAU,CAACgB,QAAQ,CAACL,QAAQ,CAACJ,IAAI,CAACA,IAAI,CAAC;UACvCE,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEV,UAAU,CAACe,KAAK,CAAC;UAC9Cd,MAAM,CAACgB,IAAI,CAAC,aAAa,CAAC;QAC3B,OAAO;UACNR,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEC,QAAQ,CAACJ,IAAI,CAAC;UAC1DF,YAAY,CAACG,KAAI,GAAIG,QAAQ,CAACJ,IAAI,CAACW,OAAO;QAC3C;MACD,EAAE,OAAOC,KAAK,EAAE;QACfV,OAAO,CAACU,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;QAC3Cd,YAAY,CAACG,KAAI,GAAI,kBAAkB;MACxC;IACD,CAAC;IAED,OAAO;MACNN,SAAS;MACTI,WAAW;MACXD;IACD,CAAC;EACF;AACD,CAAC","ignoreList":[]}]}