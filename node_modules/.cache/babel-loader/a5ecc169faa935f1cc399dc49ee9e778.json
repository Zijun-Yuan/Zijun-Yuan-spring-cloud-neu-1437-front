{"remainingRequest":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\src\\stores\\locationStore.js","dependencies":[{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\src\\stores\\locationStore.js","mtime":1718767589928},{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\babel.config.js","mtime":1718259580098},{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\package.json","mtime":1718596960089},{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1718259582208},{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1718259582042}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lU3RvcmUgfSBmcm9tICdwaW5pYSc7CmltcG9ydCAqIGFzIExvY2F0aW9uQVBJIGZyb20gJ0AvYXBpL2xvY2F0aW9uLmpzJzsKZXhwb3J0IGNvbnN0IHVzZUxvY2F0aW9uU3RvcmUgPSBkZWZpbmVTdG9yZSgnbG9jYXRpb24nLCB7CiAgc3RhdGU6ICgpID0+ICh7CiAgICBwcm92aW5jZXM6IFtdLAogICAgY2l0aWVzOiBbXSwKICAgIHByb3ZpbmNlTWFwOiB7fSwKICAgIGNpdHlNYXA6IHt9LAogICAgaW5pdEZsYWc6IGZhbHNlCiAgfSksCiAgYWN0aW9uczogewogICAgYXN5bmMgaW5pdExvY2F0aW9uU3RvcmUoKSB7CiAgICAgIGF3YWl0IHRoaXMuZmV0Y2hMb2NhdGlvbigpOwogICAgICB0aGlzLnByb3ZpbmNlTWFwID0gdGhpcy5jcmVhdGVQcm92aW5jZU1hcCh0aGlzLnByb3ZpbmNlcyk7CiAgICAgIHRoaXMuY2l0eU1hcCA9IHRoaXMuY3JlYXRlQ2l0eU1hcCh0aGlzLmNpdGllcywgdGhpcy5wcm92aW5jZU1hcCk7CiAgICAgIHRoaXMuaW5pdEZsYWcgPSB0cnVlOwogICAgfSwKICAgIGFzeW5jIGZldGNoTG9jYXRpb24oKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2VQcm92aW5jZSA9IGF3YWl0IExvY2F0aW9uQVBJLmdldFByb3ZpbmNlTGlzdCgpOwogICAgICAgIGNvbnN0IHJlc3BvbnNlQ2l0eSA9IGF3YWl0IExvY2F0aW9uQVBJLmdldENpdHlMaXN0KCk7CiAgICAgICAgdGhpcy5wcm92aW5jZXMgPSByZXNwb25zZVByb3ZpbmNlLmRhdGEuZGF0YTsKICAgICAgICB0aGlzLmNpdGllcyA9IHJlc3BvbnNlQ2l0eS5kYXRhLmRhdGE7CiAgICAgICAgY29uc29sZS5sb2coInJlc3BvbnNlUHJvdmluY2U6ICIsIHRoaXMucHJvdmluY2VzKTsKICAgICAgICBjb25zb2xlLmxvZygicmVzcG9uc2VDaXR5OiAiLCB0aGlzLmNpdGllcyk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIGRhdGE6JywgZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgY3JlYXRlUHJvdmluY2VNYXAocHJvdmluY2VzKSB7CiAgICAgIGNvbnN0IHByb3ZpbmNlTWFwID0ge307CiAgICAgIHRoaXMucHJvdmluY2VzLmZvckVhY2gocHJvdmluY2UgPT4gewogICAgICAgIHByb3ZpbmNlTWFwW3Byb3ZpbmNlLnByb3ZpbmNlSWRdID0gcHJvdmluY2U7CiAgICAgIH0pOwogICAgICByZXR1cm4gcHJvdmluY2VNYXA7CiAgICB9LAogICAgY3JlYXRlQ2l0eU1hcChjaXRpZXMsIHByb3ZpbmNlTWFwKSB7CiAgICAgIGNvbnN0IGNpdHlNYXAgPSB7fTsKICAgICAgdGhpcy5jaXRpZXMuZm9yRWFjaChjaXR5ID0+IHsKICAgICAgICBjb25zdCBwcm92aW5jZUluZm8gPSBwcm92aW5jZU1hcFtjaXR5LnByb3ZpbmNlSWRdOwogICAgICAgIGNpdHlNYXBbY2l0eS5jaXR5Q29kZV0gPSB7CiAgICAgICAgICAuLi5jaXR5LAogICAgICAgICAgcHJvdmluY2U6IHByb3ZpbmNlSW5mbwogICAgICAgIH07CiAgICAgIH0pOwogICAgICByZXR1cm4gY2l0eU1hcDsKICAgIH0sCiAgICBnZXRDaXR5QW5kUHJvdmluY2VCeUNpdHlDb2RlKGNpdHlDb2RlKSB7CiAgICAgIC8vIHRoaXMuaW5pdExvY2F0aW9uU3RvcmUoKTsKICAgICAgaWYgKCF0aGlzLmluaXRGbGFnKSB7CiAgICAgICAgdGhpcy5pbml0TG9jYXRpb25TdG9yZSgpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmNpdHlNYXBbY2l0eUNvZGVdOwogICAgfSwKICAgIGdldFByb3ZpbmNlQnlQcm92aW5jZUlkKHByb3ZpbmNlSWQpIHsKICAgICAgLy8gdGhpcy5pbml0TG9jYXRpb25TdG9yZSgpOwogICAgICBpZiAoIXRoaXMuaW5pdEZsYWcpIHsKICAgICAgICB0aGlzLmluaXRMb2NhdGlvblN0b3JlKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMucHJvdmluY2VNYXBbcHJvdmluY2VJZF07CiAgICB9LAogICAgdGVzdCgpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5nZXRDaXR5QW5kUHJvdmluY2VCeUNpdHlDb2RlKCcxMDEwMTAyMDAnKSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZ2V0UHJvdmluY2VCeVByb3ZpbmNlSWQoMSkpOwogICAgfQogIH0KfSk7"},{"version":3,"names":["defineStore","LocationAPI","useLocationStore","state","provinces","cities","provinceMap","cityMap","initFlag","actions","initLocationStore","fetchLocation","createProvinceMap","createCityMap","responseProvince","getProvinceList","responseCity","getCityList","data","console","log","error","forEach","province","provinceId","city","provinceInfo","cityCode","getCityAndProvinceByCityCode","getProvinceByProvinceId","test"],"sources":["C:/Users/ydc/Documents/HBuilderProjects/neu-training-front/src/stores/locationStore.js"],"sourcesContent":["import {\r\n\tdefineStore\r\n} from 'pinia';\r\nimport * as LocationAPI from '@/api/location.js';\r\nexport const useLocationStore = defineStore('location', {\r\n\tstate: () => ({\r\n\t\tprovinces: [],\r\n\t\tcities: [],\r\n\t\tprovinceMap: {},\r\n\t\tcityMap: {},\r\n\t\tinitFlag: false,\r\n\t}),\r\n\tactions: {\r\n\t\tasync initLocationStore() {\r\n\t\t\tawait this.fetchLocation();\r\n\t\t\tthis.provinceMap = this.createProvinceMap(this.provinces);\r\n\t\t\tthis.cityMap = this.createCityMap(this.cities, this.provinceMap);\r\n\t\t\tthis.initFlag = true;\r\n\t\t},\r\n\r\n\t\tasync fetchLocation() {\r\n\t\t\ttry {\r\n\t\t\t\tconst responseProvince = await LocationAPI.getProvinceList();\r\n\t\t\t\tconst responseCity = await LocationAPI.getCityList();\r\n\t\t\t\tthis.provinces = responseProvince.data.data;\r\n\t\t\t\tthis.cities = responseCity.data.data;\r\n\t\t\t\tconsole.log(\"responseProvince: \", this.provinces);\r\n\t\t\t\tconsole.log(\"responseCity: \", this.cities);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('Failed to fetch data:', error);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t\r\n\t\tcreateProvinceMap(provinces) {\r\n\r\n\t\t\tconst provinceMap = {};\r\n\t\t\tthis.provinces.forEach(province => {\r\n\t\t\t\tprovinceMap[province.provinceId] = province;\r\n\t\t\t});\r\n\t\t\treturn provinceMap;\r\n\t\t},\r\n\r\n\t\tcreateCityMap(cities, provinceMap) {\r\n\t\t\tconst cityMap = {};\r\n\t\t\tthis.cities.forEach(city => {\r\n\t\t\t\tconst provinceInfo = provinceMap[city.provinceId];\r\n\t\t\t\tcityMap[city.cityCode] = {\r\n\t\t\t\t\t...city,\r\n\t\t\t\t\tprovince: provinceInfo\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\treturn cityMap;\r\n\t\t},\r\n\r\n\t\tgetCityAndProvinceByCityCode(cityCode) {\r\n\t\t\t// this.initLocationStore();\r\n\t\t\tif (!this.initFlag) {\r\n\t\t\t\tthis.initLocationStore();\r\n\t\t\t}\r\n\t\t\treturn this.cityMap[cityCode];\r\n\t\t},\r\n\r\n\t\tgetProvinceByProvinceId(provinceId) {\r\n\t\t\t// this.initLocationStore();\r\n\t\t\tif (!this.initFlag) {\r\n\t\t\t\tthis.initLocationStore();\r\n\t\t\t}\r\n\t\t\treturn this.provinceMap[provinceId];\r\n\t\t},\r\n\r\n\t\ttest() {\r\n\t\t\tconsole.log(this.getCityAndProvinceByCityCode('101010200'));\r\n\t\t\tconsole.log(this.getProvinceByProvinceId(1));\r\n\t\t},\r\n\t}\r\n});"],"mappings":"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","ignoreList":[]}]}