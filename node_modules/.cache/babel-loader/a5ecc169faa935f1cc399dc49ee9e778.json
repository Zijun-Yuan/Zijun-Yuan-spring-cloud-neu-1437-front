{"remainingRequest":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\src\\stores\\locationStore.js","dependencies":[{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\src\\stores\\locationStore.js","mtime":1718871016863},{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\babel.config.js","mtime":1718259580098},{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\package.json","mtime":1718596960089},{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1718259582208},{"path":"C:\\Users\\ydc\\Documents\\HBuilderProjects\\neu-training-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1718259582042}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lU3RvcmUgfSBmcm9tICdwaW5pYSc7CmltcG9ydCAqIGFzIExvY2F0aW9uQVBJIGZyb20gJ0AvYXBpL2xvY2F0aW9uLmpzJzsKZXhwb3J0IGNvbnN0IHVzZUxvY2F0aW9uU3RvcmUgPSBkZWZpbmVTdG9yZSgnbG9jYXRpb24nLCB7CiAgc3RhdGU6ICgpID0+ICh7CiAgICBwcm92aW5jZXM6IFtdLAogICAgY2l0aWVzOiBbXSwKICAgIHByb3ZpbmNlTWFwOiB7fSwKICAgIGNpdHlNYXA6IHt9LAogICAgaW5pdEZsYWc6IGZhbHNlCiAgfSksCiAgYWN0aW9uczogewogICAgYXN5bmMgaW5pdExvY2F0aW9uU3RvcmUoKSB7CiAgICAgIGF3YWl0IHRoaXMuZmV0Y2hMb2NhdGlvbigpOwogICAgICB0aGlzLnByb3ZpbmNlTWFwID0gYXdhaXQgdGhpcy5jcmVhdGVQcm92aW5jZU1hcCh0aGlzLnByb3ZpbmNlcyk7CiAgICAgIHRoaXMuY2l0eU1hcCA9IGF3YWl0IHRoaXMuY3JlYXRlQ2l0eU1hcCh0aGlzLmNpdGllcywgdGhpcy5wcm92aW5jZU1hcCk7CiAgICAgIHRoaXMuaW5pdEZsYWcgPSB0cnVlOwogICAgfSwKICAgIGFzeW5jIGZldGNoTG9jYXRpb24oKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2VQcm92aW5jZSA9IGF3YWl0IExvY2F0aW9uQVBJLmdldFByb3ZpbmNlTGlzdCgpOwogICAgICAgIGNvbnN0IHJlc3BvbnNlQ2l0eSA9IGF3YWl0IExvY2F0aW9uQVBJLmdldENpdHlMaXN0KCk7CiAgICAgICAgdGhpcy5wcm92aW5jZXMgPSByZXNwb25zZVByb3ZpbmNlLmRhdGEuZGF0YTsKICAgICAgICB0aGlzLmNpdGllcyA9IHJlc3BvbnNlQ2l0eS5kYXRhLmRhdGE7CiAgICAgICAgLy8gY29uc29sZS5sb2coInJlc3BvbnNlUHJvdmluY2U6ICIsIHRoaXMucHJvdmluY2VzKTsKICAgICAgICAvLyBjb25zb2xlLmxvZygicmVzcG9uc2VDaXR5OiAiLCB0aGlzLmNpdGllcyk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIGRhdGE6JywgZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgY3JlYXRlUHJvdmluY2VNYXAocHJvdmluY2VzKSB7CiAgICAgIGNvbnN0IHByb3ZpbmNlTWFwID0ge307CiAgICAgIHRoaXMucHJvdmluY2VzLmZvckVhY2gocHJvdmluY2UgPT4gewogICAgICAgIHByb3ZpbmNlTWFwW3Byb3ZpbmNlLnByb3ZpbmNlSWRdID0gcHJvdmluY2U7CiAgICAgIH0pOwogICAgICByZXR1cm4gcHJvdmluY2VNYXA7CiAgICB9LAogICAgYXN5bmMgY3JlYXRlQ2l0eU1hcChjaXRpZXMsIHByb3ZpbmNlTWFwKSB7CiAgICAgIGNvbnN0IGNpdHlNYXAgPSB7fTsKICAgICAgdGhpcy5jaXRpZXMuZm9yRWFjaChjaXR5ID0+IHsKICAgICAgICBjb25zdCBwcm92aW5jZUluZm8gPSBwcm92aW5jZU1hcFtjaXR5LnByb3ZpbmNlSWRdOwogICAgICAgIGNpdHlNYXBbY2l0eS5jaXR5Q29kZV0gPSB7CiAgICAgICAgICAuLi5jaXR5LAogICAgICAgICAgcHJvdmluY2U6IHByb3ZpbmNlSW5mbwogICAgICAgIH07CiAgICAgIH0pOwogICAgICByZXR1cm4gY2l0eU1hcDsKICAgIH0sCiAgICBhc3luYyBnZXRQcm92aW5jZUJ5Q2l0eUNvZGUoY2l0eUNvZGUpIHsKICAgICAgdmFyIF90aGlzJGNpdHlNYXAkY2l0eUNvZDsKICAgICAgaWYgKCF0aGlzLmluaXRGbGFnKSB7CiAgICAgICAgYXdhaXQgdGhpcy5pbml0TG9jYXRpb25TdG9yZSgpOwogICAgICB9CiAgICAgIHJldHVybiAoX3RoaXMkY2l0eU1hcCRjaXR5Q29kID0gdGhpcy5jaXR5TWFwW2NpdHlDb2RlXSkgPT09IG51bGwgfHwgX3RoaXMkY2l0eU1hcCRjaXR5Q29kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjaXR5TWFwJGNpdHlDb2QucHJvdmluY2U7CiAgICB9LAogICAgYXN5bmMgZ2V0Q2l0aWVzQnlQcm92aW5jZUlkKHByb3ZpbmNlSWQpIHsKICAgICAgaWYgKCF0aGlzLmluaXRGbGFnKSB7CiAgICAgICAgYXdhaXQgdGhpcy5pbml0TG9jYXRpb25TdG9yZSgpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmNpdGllcy5maWx0ZXIoY2l0eSA9PiBjaXR5LnByb3ZpbmNlSWQgPT09IHByb3ZpbmNlSWQpOwogICAgfSwKICAgIC8vIOi/memHjOWPqui/lOWbnmNpdHnlr7nosaHvvIzkuI3ov5Tlm55wcm92aW5jZeWvueixoQogICAgYXN5bmMgZ2V0Q2l0eUFuZFByb3ZpbmNlQnlDaXR5Q29kZShjaXR5Q29kZSkgewogICAgICBpZiAoIXRoaXMuaW5pdEZsYWcpIHsKICAgICAgICBhd2FpdCB0aGlzLmluaXRMb2NhdGlvblN0b3JlKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuY2l0eU1hcFtjaXR5Q29kZV07CiAgICB9LAogICAgYXN5bmMgZ2V0UHJvdmluY2VCeVByb3ZpbmNlSWQocHJvdmluY2VJZCkgewogICAgICBpZiAoIXRoaXMuaW5pdEZsYWcpIHsKICAgICAgICBhd2FpdCB0aGlzLmluaXRMb2NhdGlvblN0b3JlKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMucHJvdmluY2VNYXBbcHJvdmluY2VJZF07CiAgICB9LAogICAgYXN5bmMgZ2V0QWxsUHJvdmluY2VzKCkgewogICAgICBpZiAoIXRoaXMuaW5pdEZsYWcpIHsKICAgICAgICBhd2FpdCB0aGlzLmluaXRMb2NhdGlvblN0b3JlKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMucHJvdmluY2VzOwogICAgfSwKICAgIGFzeW5jIHRlc3QoKSB7CiAgICAgIGF3YWl0IHRoaXMuaW5pdExvY2F0aW9uU3RvcmUoKTsKICAgICAgY29uc29sZS5sb2codGhpcy5nZXRDaXR5QW5kUHJvdmluY2VCeUNpdHlDb2RlKCcxMDEwMTAyMDAnKSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZ2V0UHJvdmluY2VCeVByb3ZpbmNlSWQoMSkpOwogICAgfQogIH0KfSk7"},{"version":3,"names":["defineStore","LocationAPI","useLocationStore","state","provinces","cities","provinceMap","cityMap","initFlag","actions","initLocationStore","fetchLocation","createProvinceMap","createCityMap","responseProvince","getProvinceList","responseCity","getCityList","data","error","console","forEach","province","provinceId","city","provinceInfo","cityCode","getProvinceByCityCode","_this$cityMap$cityCod","getCitiesByProvinceId","filter","getCityAndProvinceByCityCode","getProvinceByProvinceId","getAllProvinces","test","log"],"sources":["C:/Users/ydc/Documents/HBuilderProjects/neu-training-front/src/stores/locationStore.js"],"sourcesContent":["import {\r\n\tdefineStore\r\n} from 'pinia';\r\nimport * as LocationAPI from '@/api/location.js';\r\nexport const useLocationStore = defineStore('location', {\r\n\tstate: () => ({\r\n\t\tprovinces: [],\r\n\t\tcities: [],\r\n\t\tprovinceMap: {},\r\n\t\tcityMap: {},\r\n\t\tinitFlag: false,\r\n\t}),\r\n\tactions: {\r\n\t\tasync initLocationStore() {\r\n\t\t\tawait this.fetchLocation();\r\n\t\t\tthis.provinceMap = await this.createProvinceMap(this.provinces);\r\n\t\t\tthis.cityMap = await this.createCityMap(this.cities, this.provinceMap);\r\n\t\t\tthis.initFlag = true;\r\n\t\t},\r\n\r\n\t\tasync fetchLocation() {\r\n\t\t\ttry {\r\n\t\t\t\tconst responseProvince = await LocationAPI.getProvinceList();\r\n\t\t\t\tconst responseCity = await LocationAPI.getCityList();\r\n\t\t\t\tthis.provinces = responseProvince.data.data;\r\n\t\t\t\tthis.cities = responseCity.data.data;\r\n\t\t\t\t// console.log(\"responseProvince: \", this.provinces);\r\n\t\t\t\t// console.log(\"responseCity: \", this.cities);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('Failed to fetch data:', error);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tasync createProvinceMap(provinces) {\r\n\t\t\tconst provinceMap = {};\r\n\t\t\tthis.provinces.forEach(province => {\r\n\t\t\t\tprovinceMap[province.provinceId] = province;\r\n\t\t\t});\r\n\t\t\treturn provinceMap;\r\n\t\t},\r\n\r\n\t\tasync createCityMap(cities, provinceMap) {\r\n\t\t\tconst cityMap = {};\r\n\t\t\tthis.cities.forEach(city => {\r\n\t\t\t\tconst provinceInfo = provinceMap[city.provinceId];\r\n\t\t\t\tcityMap[city.cityCode] = {\r\n\t\t\t\t\t...city,\r\n\t\t\t\t\tprovince: provinceInfo\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\treturn cityMap;\r\n\t\t},\r\n\r\n\t\tasync getProvinceByCityCode(cityCode) {\r\n\t\t\tif (!this.initFlag) {\r\n\t\t\t\tawait this.initLocationStore();\r\n\t\t\t}\r\n\t\t\treturn this.cityMap[cityCode]?.province;\r\n\t\t},\r\n\r\n\t\tasync getCitiesByProvinceId(provinceId) {\r\n\t\t\tif (!this.initFlag) {\r\n\t\t\t\tawait this.initLocationStore();\r\n\t\t\t}\r\n\t\t\treturn this.cities.filter(city => city.provinceId === provinceId);\r\n\t\t},\r\n\r\n\t\t// 这里只返回city对象，不返回province对象\r\n\t\tasync getCityAndProvinceByCityCode(cityCode) {\r\n\t\t\tif (!this.initFlag) {\r\n\t\t\t\tawait this.initLocationStore();\r\n\t\t\t}\r\n\t\t\treturn this.cityMap[cityCode];\r\n\t\t},\r\n\r\n\t\tasync getProvinceByProvinceId(provinceId) {\r\n\t\t\tif (!this.initFlag) {\r\n\t\t\t\tawait this.initLocationStore();\r\n\t\t\t}\r\n\t\t\treturn this.provinceMap[provinceId];\r\n\t\t},\r\n\r\n\t\tasync getAllProvinces() {\r\n\t\t\tif (!this.initFlag) {\r\n\t\t\t\tawait this.initLocationStore();\r\n\t\t\t}\r\n\t\t\treturn this.provinces;\r\n\t\t},\r\n\r\n\t\tasync test() {\r\n\t\t\tawait this.initLocationStore();\r\n\t\t\tconsole.log(this.getCityAndProvinceByCityCode('101010200'));\r\n\t\t\tconsole.log(this.getProvinceByProvinceId(1));\r\n\t\t},\r\n\t}\r\n});"],"mappings":"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","ignoreList":[]}]}